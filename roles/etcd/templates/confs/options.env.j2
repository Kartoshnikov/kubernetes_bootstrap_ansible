{% if if_existed is defined %}
ETCD_INITIAL_CLUSTER_STATE="existing"
{% endif %}
ETCD_INITIAL_ADVERTISE_PEER_URLS="https://{{ hostvars[inventory_hostname].ansible_default_ipv4.address }}:2380"
ETCD_INITIAL_CLUSTER="{{ initial_servers.strip() }}"
ETCD_NAME="{{ hostvars[inventory_hostname].ansible_hostname }}"
ETCD_ENABLE_V2=true
ETCD_DATA_DIR={{ etcd_data_path }}
ETCD_WAL_DIR={{ etcd_wal_path }}
ETCD_LISTEN_PEER_URLS="https://{{ hostvars[inventory_hostname].ansible_default_ipv4.address }}:2380"
ETCD_PEER_CERT_FILE=/etc/ssl/etcd/etcd.crt
ETCD_PEER_KEY_FILE=/etc/ssl/etcd/etcd.key
ETCD_PEER_TRUSTED_CA_FILE=/etc/ssl/etcd/ca.crt
ETCD_PEER_CLIENT_CERT_AUTH=true
ETCD_LISTEN_CLIENT_URLS="http://127.0.0.1:2379,https://{{ hostvars[inventory_hostname].ansible_default_ipv4.address }}:2379"
ETCD_ADVERTISE_CLIENT_URLS="https://{{ hostvars[inventory_hostname].ansible_default_ipv4.address }}:2379"
ETCD_CERT_FILE=/etc/ssl/etcd/etcd.crt
ETCD_KEY_FILE=/etc/ssl/etcd/etcd.key
ETCD_TRUSTED_CA_FILE=/etc/ssl/etcd/ca.crt
ETCD_CLIENT_CERT_AUTH=true
ETCD_HEARTBEAT_INTERVAL=800
ETCD_ELECTION_TIMEOUT=4000